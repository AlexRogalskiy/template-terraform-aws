image:
  file: .gitpod.Dockerfile

# List the start up tasks. Learn more https://www.gitpod.io/docs/config-start-tasks/
tasks:
  - name: Install Terraform dependencies
    init: echo "You are on" `terraform version`
    command: gp sync-done build

  - name: Initalise terraform
    init: gp sync-await build
    command: |
      export AWS_ACCESS_KEY_ID="$AWS_ACCESS_KEY_ID"
      export AWS_SECRET_ACCESS_KEY="$AWS_SECRETS_ACCESS_KEY"
      export AWS_DEFAULT_REGION="eu-west-1"
      terraform init
      terraform plan

vscode:
  extensions:
    - hashicorp.terraform
